{% extends "_base.html" %}

{% block title %}{{ member }}{% endblock title %}

{% block content %}
  <div class="row">
  <div class="col">
    <h1>{{ member }}</h1>
    {% include 'membership/member_detail_card.html' %}
  </div>
  </div>
  <div class="col mt-md-5">
    <h3>Committee{{ member.committee_memberships.count|pluralize }} Served</h3>
    <ul class="list-unstyled">
    {% for membership in member.committee_memberships.all %}
      {% ifchanged membership.year_served %}<h5 class="mt-4">{{ membership.year_served }}</h5>{% endifchanged %}
      <a href="{% url 'committee_detail_by_year' slug=membership.committee.slug year=membership.year_served.year%}"><li><strong>{{ membership.committee }}:</strong> {{ membership.get_position_display }}</li></a>
    {% endfor %}
    </ul>
  </div>

  {% if member.family.children.count or member.family.adults.count > 1 %}
    <hr>
    <h2>Family</h2>
    <div class="card-group" id="family-card-group">
      {% for member in member.get_partners %}
        {% include 'membership/member_detail_card.html' with member=member %}
      {% endfor %}
      {% for child in member.family.children.all %}
        {% include 'membership/member_detail_card.html' with member=child %}
      {% endfor %}
    </div>
  {% endif %}
  {% if user.family == member.family %}
    <div class="btn-group mt-4 btn-group-lg" role="group" aria-label="Add Family Members">
      <a href="{% url 'parent_create' %}" class="btn btn-secondary">Add an adult<span class="ml-3 px-2 badge badge-light"><i class="fas fa-male"></i></span></a>
      <a href="{% url 'scout_create' %}" class="btn btn-secondary">Nominate a cub<span class="ml-3 badge badge-light"><i class="fas fa-child"></i></span></a>
    </div>
  {% endif %}
{% endblock %}