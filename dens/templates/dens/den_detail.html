{% extends '_base.html' %}
{% load static %}
{% load thumbnail %}

{% block title %}{{ den }}{% endblock %}

{% block content %}
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'home_page' %}">Home</a></li>
      <li class="breadcrumb-item"><a href="{% url 'dens_list' %}">Dens</a></li>
      <li class="breadcrumb-item active" aria-current="page">{{ den }}</li>
    </ol>
  </nav>
  {% if den.patch or den.rank.patch %}
    <div class="container p-3 bg-white rounded d-none d-sm-flex justify-content-between align-items-center" id="den-patches">
      {% if den.patch %}
        <img src="{{ den.patch.url }}" alt="Den {{ den.number }} patch" class="img-fluid h-100 rounded">
      {% endif %}
      {% if den.rank.patch %}
        <img src="{{ den.rank.patch.url }}" alt="{{ den.rank }} patch" class="img-fluid h-100 rounded">
      {% endif %}
    </div>
  {% endif %}
  <h2>Leader{{ den.leadership.count|pluralize }}</h2>
  {% if den.leadership.count %}
    <ul class="list-group">
      {% for leader in den.leadership.all %}
        <li class="list-group-item"><a href="{{ leader.get_absolute_url }}">{{ leader }}</a></li>{% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-warning" role="alert">There are no leaders assigned to this den</div>
  {% endif %}
  <h2>Cub{{ den.scouts.count|pluralize }}</h2>
  {% if den.scouts.count %}
    <ul class="list-group">
      {% for scout in den.scouts.all %}
        <li class="list-group-item">
          <a href="{{ scout.get_absolute_url }}">
            <div class="row align-items-center">
              <div class="col-sm-2">
                {% if scout.photo %}
                  <img src="{{ scout.photo|thumbnail_url:'thumbnail' }}" class="img-fluid rounded"
                       alt="{{ scout }}'s profile picture">
                {% else %}
                  <img src="{% static 'img/avatar_cub.png' %}" class="img-fluid rounded" alt="No profile picture">
                {% endif %}
              </div>
              <div class="col-sm-10">{{ scout.full_name }}</div>
            </div>
          </a>
          </a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div class="alert alert-light" role="alert">This den has no members</div>
  {% endif %}
{% endblock %}